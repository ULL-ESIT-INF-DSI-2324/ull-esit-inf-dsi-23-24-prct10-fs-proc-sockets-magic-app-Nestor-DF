<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>doc-test</title><meta name="description" content="Documentation for doc-test"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">doc-test</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>doc-test</h2></div><div class="tsd-panel tsd-typography"><a id="md:práctica-9---aplicación-para-coleccionistas-de-cartas-magic" class="tsd-anchor"></a><h1><a href="#md:práctica-9---aplicación-para-coleccionistas-de-cartas-magic">Práctica 9 - Aplicación para coleccionistas de cartas Magic</a></h1><ul>
<li>Néstor Delgado Feliciano (<a href="mailto:alu0101488998@ull.edu.es">alu0101488998@ull.edu.es</a>)</li>
</ul>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-Nestor-DF?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-Nestor-DF/badge.svg?branch=main" alt="Coverage Status"></a></p>
<p><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-Nestor-DF"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-Nestor-DF&metric=alert_status" alt="Quality Gate Status"></a></p>
<a id="md:índice" class="tsd-anchor"></a><h2><a href="#md:índice"><strong>Índice</strong></a></h2><ul>
<li><a href="#md:práctica-9---aplicación-para-coleccionistas-de-cartas-magic">Práctica 9 - Aplicación para coleccionistas de cartas Magic</a><ul>
<li><a href="#md:índice"><strong>Índice</strong></a></li>
<li><a href="#md:introducción"><strong>Introducción</strong></a></li>
<li><a href="#md:desarrollo"><strong>Desarrollo</strong></a></li>
<li><a href="#md:ejercicio-pe"><strong>Ejercicio PE</strong></a></li>
<li><a href="#md:conclusiones"><strong>Conclusiones</strong></a></li>
<li><a href="#md:recursos-empleados"><strong>Recursos Empleados</strong></a></li>
</ul>
</li>
</ul>
<a id="md:introducción" class="tsd-anchor"></a><h2><a href="#md:introducción"><strong>Introducción</strong></a></h2><p>En esta práctica se desarrollará una aplicación para gestionar información sobre cartas del juego Magic: The Gathering pertenecientes a un usuario específico. La aplicación permitirá llevar a cabo diversas operaciones, como añadir, modificar, eliminar, listar y leer la información asociada a estas cartas. Toda la información de cada carta se almacenará en formato JSON en el sistema de archivos de la máquina donde se ejecute la aplicación. Además, se enfatiza que la interacción con la aplicación se realizará exclusivamente a través de la línea de comandos, sin la existencia de un menú interactivo para simplificar la experiencia de usuario.</p>
<a id="md:desarrollo" class="tsd-anchor"></a><h2><a href="#md:desarrollo"><strong>Desarrollo</strong></a></h2><p>En primer lugar, desarrollé una clase <strong>MagiCard</strong> para guardar la información necesaria para cada carta, además de poder gestionar los atributos opcionales dependiendo del tipo de carta. Por poder podría haber trabajado directamente con la información <em>clave: valor</em> a partir de los comandos pero llegué a la conclusión que encapsular la entidad de una carta es más cómodo y elegante.</p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">MagiCard</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">manaCost</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-3">Color</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1">: </span><span class="hl-3">Type</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">rarity</span><span class="hl-1">: </span><span class="hl-3">Rarity</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">rulesText</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">marketValue</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">powerAndToughness</span><span class="hl-1">?: [</span><span class="hl-3">number</span><span class="hl-1">, </span><span class="hl-3">number</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">loyaltyMarks</span><span class="hl-1">?: </span><span class="hl-3">number</span><span class="hl-1">,</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1"> = </span><span class="hl-4">id</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1"> = </span><span class="hl-4">name</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">manaCost</span><span class="hl-1"> = </span><span class="hl-4">manaCost</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> = </span><span class="hl-4">color</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> = </span><span class="hl-4">type</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rarity</span><span class="hl-1"> = </span><span class="hl-4">rarity</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rulesText</span><span class="hl-1"> = </span><span class="hl-4">rulesText</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">marketValue</span><span class="hl-1"> = </span><span class="hl-4">marketValue</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">type</span><span class="hl-1"> === </span><span class="hl-4">Type</span><span class="hl-1">.</span><span class="hl-4">Creature</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">powerAndToughness</span><span class="hl-1"> = </span><span class="hl-4">powerAndToughness</span><span class="hl-1">;</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">type</span><span class="hl-1"> === </span><span class="hl-4">Type</span><span class="hl-1">.</span><span class="hl-4">Planeswalker</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">loyaltyMarks</span><span class="hl-1"> = </span><span class="hl-4">loyaltyMarks</span><span class="hl-1">;</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">powerAndToughness</span><span class="hl-1"> = </span><span class="hl-2">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">loyaltyMarks</span><span class="hl-1"> = </span><span class="hl-2">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Más getters</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">getMarketValue</span><span class="hl-1">(): </span><span class="hl-3">number</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">marketValue</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">getPowerAndToughness</span><span class="hl-1">(): [</span><span class="hl-3">number</span><span class="hl-1">, </span><span class="hl-3">number</span><span class="hl-1">] | </span><span class="hl-3">undefined</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">powerAndToughness</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">getLoyaltyMarks</span><span class="hl-1">(): </span><span class="hl-3">number</span><span class="hl-1"> | </span><span class="hl-3">undefined</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">loyaltyMarks</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Cabe destacar que use tipos enumerados para definir ciertos atributos de las cartas como el color, tipo o la rareza.</p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">enum</span><span class="hl-1"> </span><span class="hl-3">Color</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">White</span><span class="hl-1"> = </span><span class="hl-8">&#39;White&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Blue</span><span class="hl-1"> = </span><span class="hl-8">&#39;Blue&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Black</span><span class="hl-1"> = </span><span class="hl-8">&#39;Black&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Red</span><span class="hl-1"> = </span><span class="hl-8">&#39;Red&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Green</span><span class="hl-1"> = </span><span class="hl-8">&#39;Green&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Colorless</span><span class="hl-1"> = </span><span class="hl-8">&#39;Colorless&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Multicolor</span><span class="hl-1"> = </span><span class="hl-8">&#39;Multicolor&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">enum</span><span class="hl-1"> </span><span class="hl-3">Type</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">Land</span><span class="hl-1"> = </span><span class="hl-8">&#39;Land&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Creature</span><span class="hl-1"> = </span><span class="hl-8">&#39;Creature&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Enchantment</span><span class="hl-1"> = </span><span class="hl-8">&#39;Enchantment&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Sorcery</span><span class="hl-1"> = </span><span class="hl-8">&#39;Sorcery&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Instant</span><span class="hl-1"> = </span><span class="hl-8">&#39;Instant&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Artifact</span><span class="hl-1"> = </span><span class="hl-8">&#39;Artifact&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Planeswalker</span><span class="hl-1"> = </span><span class="hl-8">&#39;Planeswalker&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">enum</span><span class="hl-1"> </span><span class="hl-3">Rarity</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">Common</span><span class="hl-1"> = </span><span class="hl-8">&#39;Common&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Uncommon</span><span class="hl-1"> = </span><span class="hl-8">&#39;Uncommon&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Rare</span><span class="hl-1"> = </span><span class="hl-8">&#39;Rare&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Mythic</span><span class="hl-1"> = </span><span class="hl-8">&#39;Mythic&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>A continuación, definí la estructura de comandos del programa principal haciendo uso del paquete <strong>yargs</strong>. Como todos los comandos siguen la misma estructura voy a mostrar dos de ejemplo:</p>
<pre><code class="language-ts"><span class="hl-6">yargs</span><span class="hl-1">(</span><span class="hl-6">hideBin</span><span class="hl-1">(</span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-4">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-6">command</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-8">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">&#39;List the collection&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;user name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    (</span><span class="hl-4">argv</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">cardManager</span><span class="hl-1">.</span><span class="hl-6">listCollection</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  .</span><span class="hl-6">help</span><span class="hl-1">().</span><span class="hl-4">argv</span><span class="hl-1">;</span><br/><br/><span class="hl-6">yargs</span><span class="hl-1">(</span><span class="hl-6">hideBin</span><span class="hl-1">(</span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-4">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-6">command</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-8">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">&#39;Adds a card to the collection&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-4">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;user name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Card ID&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Card name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">manaCost:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Mana cost&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">color:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Color of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><span class="hl-8">&#39;White&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Blue&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Black&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Red&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Green&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Colorless&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Multicolor&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">cardType:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Type of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><span class="hl-8">&#39;Land&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Creature&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Enchantment&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Sorcery&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Instant&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Artifact&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Planeswalker&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">rarity:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Rarity of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><span class="hl-8">&#39;Common&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Uncommon&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Rare&#39;</span><span class="hl-1">, </span><span class="hl-8">&#39;Mythic&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">rulesText:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Rules text of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">powerToughness:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Power and Toughness of the card (for Creatures)&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;array&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-6">coerce</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">arg</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">arg</span><span class="hl-1">.</span><span class="hl-6">map</span><span class="hl-1">(</span><span class="hl-4">Number</span><span class="hl-1">),</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">loyalty:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Loyalty of the card (for Planeswalkers)&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">marketValue:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-8">&#39;Market value of the card&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&#39;number&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    (</span><span class="hl-4">argv</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">cardType</span><span class="hl-1"> === </span><span class="hl-8">&#39;Creature&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">powerToughness</span><span class="hl-1"> === </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;Creatures needs the powerToughness attribute&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">cardType</span><span class="hl-1"> === </span><span class="hl-8">&#39;Planeswalker&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">loyalty</span><span class="hl-1"> === </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Error</span><span class="hl-1">(</span><span class="hl-8">&#39;Planeswalker needs the loyalty attribute&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">cardData</span><span class="hl-1">: </span><span class="hl-3">MagiCard</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">MagiCard</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">name</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">manaCost</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-3">unknown</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-3">Color</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">cardType</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-3">unknown</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-3">Type</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">rarity</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-3">unknown</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-3">Rarity</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">rulesText</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">marketValue</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">powerToughness</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">loyalty</span><span class="hl-1">,</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">      </span><span class="hl-4">cardManager</span><span class="hl-1">.</span><span class="hl-6">addCard</span><span class="hl-1">(</span><span class="hl-4">argv</span><span class="hl-1">.</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">cardData</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  .</span><span class="hl-6">help</span><span class="hl-1">().</span><span class="hl-4">argv</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<p>Se puede ver como cada comando tiene sus argumentos obligatorios con la opción <strong>demandOption: true</strong> y cómo después de obtener la información por línea de comandos esta se procesa, por ejemplo, en el comando <strong>add</strong> se comprueba los tipos de las cartas, se crea el objeto <strong>MagiCard</strong> y se llama al método correspondiente de la clase que maneja las cartas.</p>
<p>Al final la magia del programa la hace la clase <strong>CardManager</strong>, la cual decidí hacer singleton ya que en realidad solo la quiero para encapsular las distintas operaciones que se pueden hacer con las cartas por lo que no hace falta tener más de una instancia de esta.</p>
<pre><code class="language-ts"><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">CardManager</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-4">instance</span><span class="hl-1">: </span><span class="hl-3">CardManager</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">constructor</span><span class="hl-1">() {}</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-6">getInstance</span><span class="hl-1">(): </span><span class="hl-3">CardManager</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">CardManager</span><span class="hl-1">.</span><span class="hl-4">instance</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">CardManager</span><span class="hl-1">.</span><span class="hl-4">instance</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">CardManager</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">CardManager</span><span class="hl-1">.</span><span class="hl-4">instance</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">addCard</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">card</span><span class="hl-1">: </span><span class="hl-3">MagiCard</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">userDirectory</span><span class="hl-1"> = </span><span class="hl-8">`./data/</span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">cardFilePath</span><span class="hl-1"> = </span><span class="hl-8">`</span><span class="hl-2">${</span><span class="hl-4">userDirectory</span><span class="hl-2">}</span><span class="hl-8">/</span><span class="hl-2">${</span><span class="hl-4">card</span><span class="hl-9">.</span><span class="hl-6">getId</span><span class="hl-9">()</span><span class="hl-2">}</span><span class="hl-8">.json`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-4">userDirectory</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">mkdirSync</span><span class="hl-1">(</span><span class="hl-4">userDirectory</span><span class="hl-1">, { </span><span class="hl-4">recursive:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1"> });</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-4">cardFilePath</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">red</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-8">`A card with the same ID already exists in </span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">&#39;s collection`</span><span class="hl-1">));</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">writeFileSync</span><span class="hl-1">(</span><span class="hl-4">cardFilePath</span><span class="hl-1">, </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">card</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">green</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-8">`Card added in </span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">&#39;s collection`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">updateCard</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">card</span><span class="hl-1">: </span><span class="hl-3">MagiCard</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">cardFilePath</span><span class="hl-1"> = </span><span class="hl-8">`./data/</span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">/</span><span class="hl-2">${</span><span class="hl-4">card</span><span class="hl-9">.</span><span class="hl-6">getId</span><span class="hl-9">()</span><span class="hl-2">}</span><span class="hl-8">.json`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-4">cardFilePath</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">writeFileSync</span><span class="hl-1">(</span><span class="hl-4">cardFilePath</span><span class="hl-1">, </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-6">stringify</span><span class="hl-1">(</span><span class="hl-4">card</span><span class="hl-1">));</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">green</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-8">`Card updated in </span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">&#39;s collection`</span><span class="hl-1">));</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">red</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-8">`Card not found at </span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">&#39;s collection`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">removeCard</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">cardID</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">cardFilePath</span><span class="hl-1"> = </span><span class="hl-8">`./data/</span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">/</span><span class="hl-2">${</span><span class="hl-4">cardID</span><span class="hl-2">}</span><span class="hl-8">.json`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-4">cardFilePath</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">unlinkSync</span><span class="hl-1">(</span><span class="hl-4">cardFilePath</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">green</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-8">`Card removed in </span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">&#39;s collection`</span><span class="hl-1">));</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">red</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-8">`Card not found at </span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">&#39;s collection`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">showCard</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">, </span><span class="hl-4">cardID</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">cardFilePath</span><span class="hl-1"> = </span><span class="hl-8">`./data/</span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">/</span><span class="hl-2">${</span><span class="hl-4">cardID</span><span class="hl-2">}</span><span class="hl-8">.json`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-4">cardFilePath</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">content</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">(</span><span class="hl-4">cardFilePath</span><span class="hl-1">).</span><span class="hl-6">toString</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">printCard</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">red</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-8">`Card not found at </span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">&#39;s collection`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">listCollection</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">dirPath</span><span class="hl-1"> = </span><span class="hl-8">`./data/</span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">existsSync</span><span class="hl-1">(</span><span class="hl-4">dirPath</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">files</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">readdirSync</span><span class="hl-1">(</span><span class="hl-4">dirPath</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">files</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-4">file</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">content</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">(</span><span class="hl-8">`</span><span class="hl-2">${</span><span class="hl-4">dirPath</span><span class="hl-2">}</span><span class="hl-8">/</span><span class="hl-2">${</span><span class="hl-4">file</span><span class="hl-2">}</span><span class="hl-8">`</span><span class="hl-1">).</span><span class="hl-6">toString</span><span class="hl-1">();</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">printCard</span><span class="hl-1">(</span><span class="hl-4">content</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">red</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-8">`User </span><span class="hl-2">${</span><span class="hl-4">user</span><span class="hl-2">}</span><span class="hl-8"> doesn&#39;t have a collection`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-6">formatCard</span><span class="hl-1">(</span><span class="hl-4">card</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">): </span><span class="hl-3">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">JSONcard</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-4">card</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">content</span><span class="hl-1"> = </span><span class="hl-8">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`ID: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">id</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`Name: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">name</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`Mana cost: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">manaCost</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`Color: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">color</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`Type: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">type</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`Rarity: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">rarity</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`Rules text: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">rulesText</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`Market value: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">marketValue</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">JSONcard</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> === </span><span class="hl-8">&#39;Creature&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`Power/Toughness: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">powerAndToughness</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">JSONcard</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> === </span><span class="hl-8">&#39;Planeswalker&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">content</span><span class="hl-1"> += </span><span class="hl-8">`Loyalty: </span><span class="hl-2">${</span><span class="hl-4">JSONcard</span><span class="hl-9">.</span><span class="hl-4">loyaltyMarks</span><span class="hl-2">}</span><span class="hl-10">\n</span><span class="hl-8">`</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">content</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-6">printCard</span><span class="hl-1">(</span><span class="hl-4">card</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">JSONcard</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-6">parse</span><span class="hl-1">(</span><span class="hl-4">card</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">cardInfo</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">formatCard</span><span class="hl-1">(</span><span class="hl-4">card</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">JSONcard</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-4">White</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">white</span><span class="hl-1">.</span><span class="hl-4">bold</span><span class="hl-1">.</span><span class="hl-6">italic</span><span class="hl-1">(</span><span class="hl-4">cardInfo</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-4">Blue</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">blue</span><span class="hl-1">.</span><span class="hl-4">bold</span><span class="hl-1">.</span><span class="hl-6">italic</span><span class="hl-1">(</span><span class="hl-4">cardInfo</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-4">Black</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">black</span><span class="hl-1">.</span><span class="hl-4">bold</span><span class="hl-1">.</span><span class="hl-6">italic</span><span class="hl-1">(</span><span class="hl-4">cardInfo</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-4">Red</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">red</span><span class="hl-1">.</span><span class="hl-4">bold</span><span class="hl-1">.</span><span class="hl-6">italic</span><span class="hl-1">(</span><span class="hl-4">cardInfo</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-4">Green</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">green</span><span class="hl-1">.</span><span class="hl-4">bold</span><span class="hl-1">.</span><span class="hl-6">italic</span><span class="hl-1">(</span><span class="hl-4">cardInfo</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-4">Colorless</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">gray</span><span class="hl-1">.</span><span class="hl-4">bold</span><span class="hl-1">.</span><span class="hl-6">italic</span><span class="hl-1">(</span><span class="hl-4">cardInfo</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-4">Color</span><span class="hl-1">.</span><span class="hl-4">Multicolor</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">yellow</span><span class="hl-1">.</span><span class="hl-4">bold</span><span class="hl-1">.</span><span class="hl-4">italic</span><span class="hl-1">.</span><span class="hl-6">bgBlack</span><span class="hl-1">(</span><span class="hl-4">cardInfo</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">default</span><span class="hl-1">:</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-4">red</span><span class="hl-1">.</span><span class="hl-6">bold</span><span class="hl-1">(</span><span class="hl-8">&#39;Unknown color&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Para hacer el código lo más limpio y simple posible hice que los nombres de los ficheros sean ID_de_la_carta.json, de esta manera, al ser el ID único para cada carta se simplifican muchas cosas como por ejemplo buscar una carta, verificar que no se repitan los IDs y demás ya que no tengo que acceder al contenido del fichero en sí ni parsear los nombres de estos para obtener la información.</p>
<p>La disposición de directorios sería la siguiente:</p>
<pre><code><span class="hl-4">data</span><br/><span class="hl-1">    └── </span><span class="hl-4">usuario1</span><br/><span class="hl-1">        ├── 1.</span><span class="hl-4">json</span><br/><span class="hl-1">        └── 2.</span><span class="hl-4">json</span><br/><span class="hl-1">    └── </span><span class="hl-4">usuario2</span><br/><span class="hl-1">        ├── 1.</span><span class="hl-4">json</span><br/><span class="hl-1">        └── 9.</span><span class="hl-4">json</span><br/><span class="hl-1">  .....</span>
</code><button>Copy</button></pre>
<a id="md:ejercicio-pe" class="tsd-anchor"></a><h2><a href="#md:ejercicio-pe"><strong>Ejercicio PE</strong></a></h2><p>Primero creé la clase &quot;plantilla&quot; <strong>FilterMapReduceTemplate</strong> con su método run que hace uso de los métodos &quot;plantillas&quot; de los cuales podemos diferenciar <em>filter</em> y <em>map</em> que están implementados, <em>reduce</em> que es abstracto para obligar a implementarlo en las subclases y los métodos <em>showStateAfterFilter</em> y <em>showStateAfterMap</em> vacíos ya que su implementación es opcional. Se destaca como todos lo métodos son protected para que puedan ser usados en las clases hijas.</p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">abstract</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">FilterMapReduceTemplate</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-6">run</span><span class="hl-1">(</span><span class="hl-4">list</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[], </span><span class="hl-6">predicate</span><span class="hl-1">: (</span><span class="hl-4">num</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-3">boolean</span><span class="hl-1">, </span><span class="hl-6">transform</span><span class="hl-1">: (</span><span class="hl-4">num</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-3">number</span><span class="hl-1">): </span><span class="hl-3">number</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">filteredList</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">filter</span><span class="hl-1">(</span><span class="hl-4">list</span><span class="hl-1">, </span><span class="hl-4">predicate</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">showStateAfterFilter</span><span class="hl-1">(</span><span class="hl-4">filteredList</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">mappedList</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">map</span><span class="hl-1">(</span><span class="hl-4">filteredList</span><span class="hl-1">, </span><span class="hl-4">transform</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">showStateAfterMap</span><span class="hl-1">(</span><span class="hl-4">mappedList</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">reducedResult</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">reduce</span><span class="hl-1">(</span><span class="hl-4">mappedList</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">reducedResult</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">protected</span><span class="hl-1"> </span><span class="hl-6">filter</span><span class="hl-1">(</span><span class="hl-4">list</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[], </span><span class="hl-6">predicate</span><span class="hl-1">: (</span><span class="hl-4">num</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-3">boolean</span><span class="hl-1">): </span><span class="hl-3">number</span><span class="hl-1">[] {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">filteredList</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">    </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">num</span><span class="hl-1"> </span><span class="hl-2">of</span><span class="hl-1"> </span><span class="hl-4">list</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-6">predicate</span><span class="hl-1">(</span><span class="hl-4">num</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-4">filteredList</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-4">num</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">filteredList</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">protected</span><span class="hl-1"> </span><span class="hl-6">map</span><span class="hl-1">(</span><span class="hl-4">list</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[], </span><span class="hl-6">transform</span><span class="hl-1">: (</span><span class="hl-4">num</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-3">number</span><span class="hl-1">): </span><span class="hl-3">number</span><span class="hl-1">[] {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">mappedList</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">    </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">num</span><span class="hl-1"> </span><span class="hl-2">of</span><span class="hl-1"> </span><span class="hl-4">list</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">mappedList</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-6">transform</span><span class="hl-1">(</span><span class="hl-4">num</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">mappedList</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">protected</span><span class="hl-1"> </span><span class="hl-2">abstract</span><span class="hl-1"> </span><span class="hl-6">reduce</span><span class="hl-1">(</span><span class="hl-4">list</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]): </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">protected</span><span class="hl-1"> </span><span class="hl-6">showStateAfterFilter</span><span class="hl-1">(</span><span class="hl-4">arr</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]) {}</span><br/><br/><span class="hl-1">  </span><span class="hl-2">protected</span><span class="hl-1"> </span><span class="hl-6">showStateAfterMap</span><span class="hl-1">(</span><span class="hl-4">arr</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]) {}</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Después, implementé las clases hijas específicas que heredan de esta clase &quot;plantilla&quot; implementando el método obligatorio <em>reduce</em> y en una de ellas un método opcional o <em>hook</em>.</p>
<pre><code class="language-ts"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">FilterMapAddReduce</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">FilterMapReduceTemplate</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">reduce</span><span class="hl-1">(</span><span class="hl-4">list</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]): </span><span class="hl-3">number</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">acc</span><span class="hl-1"> = </span><span class="hl-11">0</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> = </span><span class="hl-11">0</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1"> &lt; </span><span class="hl-4">list</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">; ++</span><span class="hl-4">i</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">acc</span><span class="hl-1"> += </span><span class="hl-4">list</span><span class="hl-1">[</span><span class="hl-4">i</span><span class="hl-1">];</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">acc</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-2">protected</span><span class="hl-1"> </span><span class="hl-6">showStateAfterFilter</span><span class="hl-1">(</span><span class="hl-4">arr</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]): </span><span class="hl-3">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&#39;I am a hook method, this is the result after filtering: &#39;</span><span class="hl-1">, </span><span class="hl-4">arr</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">FilterMapSubReduce</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">FilterMapReduceTemplate</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">reduce</span><span class="hl-1">(</span><span class="hl-4">list</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]): </span><span class="hl-3">number</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">acc</span><span class="hl-1"> = </span><span class="hl-11">0</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> = </span><span class="hl-11">0</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1"> &lt; </span><span class="hl-4">list</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">; ++</span><span class="hl-4">i</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">acc</span><span class="hl-1"> -= </span><span class="hl-4">list</span><span class="hl-1">[</span><span class="hl-4">i</span><span class="hl-1">];</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">acc</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">FilterMapProdReduce</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">FilterMapReduceTemplate</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">reduce</span><span class="hl-1">(</span><span class="hl-4">list</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]): </span><span class="hl-3">number</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">acc</span><span class="hl-1"> = </span><span class="hl-11">1</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> = </span><span class="hl-11">0</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1"> &lt; </span><span class="hl-4">list</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">; ++</span><span class="hl-4">i</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">acc</span><span class="hl-1"> *= </span><span class="hl-4">list</span><span class="hl-1">[</span><span class="hl-4">i</span><span class="hl-1">];</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">acc</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">FilterMapDivReduce</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">FilterMapReduceTemplate</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">reduce</span><span class="hl-1">(</span><span class="hl-4">list</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]): </span><span class="hl-3">number</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">acc</span><span class="hl-1"> = </span><span class="hl-4">list</span><span class="hl-1">[</span><span class="hl-11">0</span><span class="hl-1">];</span><br/><span class="hl-1">    </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> = </span><span class="hl-11">1</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1"> &lt; </span><span class="hl-4">list</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">; ++</span><span class="hl-4">i</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">acc</span><span class="hl-1"> /= </span><span class="hl-4">list</span><span class="hl-1">[</span><span class="hl-4">i</span><span class="hl-1">];</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">acc</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:conclusiones" class="tsd-anchor"></a><h2><a href="#md:conclusiones"><strong>Conclusiones</strong></a></h2><p>En conclusión, la resolución de esta práctica me ha permitido aprender acerca de la API síncrona proporcionada por Node.js para trabajar con el sistema de ficheros, los paquetes yargs y chalk y en general a estar más cómodo trabajando con documentación de paquetes y APIs.</p>
<a id="md:recursos-empleados" class="tsd-anchor"></a><h2><a href="#md:recursos-empleados"><strong>Recursos Empleados</strong></a></h2><ol>
<li><p>OpenAI Chat: <a href="https://chat.openai.com/">https://chat.openai.com/</a> - Plataforma de IA conversacional proporcionada por OpenAI para tareas y aplicaciones de procesamiento de lenguaje natural.</p>
</li>
<li><p>W3Schools JavaScript Reference: <a href="https://www.w3schools.com/jsrEF/default.asp">https://www.w3schools.com/jsrEF/default.asp</a> - Recurso en línea completo para aprender y consultar conceptos, sintaxis y mejores prácticas del lenguaje de programación JavaScript.</p>
</li>
<li><p>MDN Web Docs - JavaScript Reference: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference</a> - Documentación oficial de la Red de Desarrolladores de Mozilla que proporciona explicaciones detalladas, ejemplos y referencias para las características del lenguaje JavaScript y las API.</p>
</li>
<li><p>API síncrona proporcionada por Node.js para trabajar con el sistema de archivos: <a href="https://nodejs.org/docs/latest/api/fs.html">https://nodejs.org/docs/latest/api/fs.html</a></p>
</li>
<li><p>Yargs: <a href="https://www.npmjs.com/package/yargs">https://www.npmjs.com/package/yargs</a></p>
</li>
<li><p>Yargs: <a href="https://www.npmjs.com/package/yargs">https://www.npmjs.com/package/yargs</a></p>
</li>
</ol>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:práctica-9---aplicación-para-coleccionistas-de-cartas-magic"><span>Práctica 9 -<wbr/> <wbr/>Aplicación para coleccionistas de cartas <wbr/>Magic</span></a><ul><li><a href="#md:índice"><span>Índice</span></a></li><li><a href="#md:introducción"><span>Introducción</span></a></li><li><a href="#md:desarrollo"><span>Desarrollo</span></a></li><li><a href="#md:ejercicio-pe"><span>Ejercicio PE</span></a></li><li><a href="#md:conclusiones"><span>Conclusiones</span></a></li><li><a href="#md:recursos-empleados"><span>Recursos <wbr/>Empleados</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>doc-test</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><div class="tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div></body></html>